{"version":3,"file":"types.js","sourceRoot":"","sources":["../../src/common/types.ts"],"names":[],"mappings":"","sourcesContent":["import { KeyboardEvent, ReactNode } from 'react';\nimport { List } from 'immutable';\nimport { HeaderRowType, UpdateActions } from './enums';\n\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\n\nexport interface ToolbarProps {\n  columns: ColumnList;\n  rowsCount: number;\n  onToggleFilter(): void;\n}\n\nexport interface Column<V = unknown, DV = unknown> {\n  /** The name of the column. By default it will be displayed in the header cell */\n  name: string;\n  /** A unique key to distinguish each column */\n  key: string;\n  /** Column width. If not specified, it will be determined automatically based on grid width and specified widths of other columns*/\n  width?: number;\n  hidden?: boolean;\n  cellClass?: string;\n  /** By adding an event object with callbacks for the native react events you can bind events to a specific column. That will not break the default behaviour of the grid and will run only for the specified column */\n  events?: {\n    [key: string]: undefined | ((e: Event, info: ColumnEventInfo) => void);\n  };\n  /** Formatter to be used to render the cell content */\n  formatter?: React.ReactElement | React.ComponentType<FormatterProps<V, DV>>;\n  /** Enables cell editing. If set and no editor property specified, then a textinput will be used as the cell editor */\n  editable?: boolean | ((rowData: RowData) => boolean);\n  /** Enable dragging of a column */\n  draggable?: boolean;\n  /** Enable filtering of a column */\n  filterable?: boolean;\n  /** Determines whether column is frozen or not */\n  frozen?: boolean;\n  /** Enable resizing of a column */\n  resizable?: boolean;\n  /** Enable sorting of a column */\n  sortable?: boolean;\n  /** Sets the column sort order to be descending instead of ascending the first time the column is sorted */\n  sortDescendingFirst?: boolean;\n  /** Editor to be rendered when cell of column is being edited. If set, then the column is automatically set to be editable */\n  editor?: React.ReactElement | React.ComponentType<EditorProps<V, DV>>;\n  /** Header renderer for each header cell */\n  headerRenderer?: React.ReactElement | React.ComponentType<HeaderRowProps<V, DV>>;\n  /** Component to be used to filter the data of the column */\n  filterRenderer?: React.ComponentType<FilterRendererProps<V, DV>>;\n\n  // TODO: these props are only used by checkbox editor and we should remove them\n  onCellChange?(rowIdx: number, key: string, dependentValues: DV, event: React.SyntheticEvent): void;\n  getRowMetaData?(rowData: RowData, column: CalculatedColumn<V, DV>): unknown;\n}\n\nexport interface CalculatedColumn<V = unknown, DV = unknown> extends Column<V, DV> {\n  idx: number;\n  width: number;\n  left: number;\n}\n\nexport type ColumnList = Column[] | List<Column>;\n\nexport interface ColumnMetrics {\n  columns: CalculatedColumn[];\n  width: number;\n  totalColumnWidth: number;\n  totalWidth: number;\n  minColumnWidth: number;\n}\n\nexport interface RowData {\n  get?(key: string): unknown;\n  __metaData?: RowGroupMetaData;\n  [key: string]: unknown;\n}\n\nexport interface CellMetaData {\n  rowKey: string;\n  onCellClick(position: Position): void;\n  onCellContextMenu(position: Position): void;\n  onCellDoubleClick(position: Position): void;\n  onDragEnter(overRowIdx: number): void;\n  onCellExpand?(options: SubRowOptions): void;\n  onRowExpandToggle?(e: RowExpandToggleEvent): void;\n  onCellMouseDown?(position: Position): void;\n  onCellMouseEnter?(position: Position): void;\n  onAddSubRow?(): void;\n  onDeleteSubRow?(options: SubRowOptions): void;\n  getCellActions?(column: CalculatedColumn, rowData: RowData): CellActionButton[] | undefined;\n}\n\nexport interface Position {\n  idx: number;\n  rowIdx: number;\n}\n\nexport interface Range {\n  topLeft: Position;\n  bottomRight: Position;\n}\n\nexport interface SelectedRange extends Range {\n  startCell: Position | null;\n  cursorCell: Position | null;\n  isDragging: boolean;\n}\n\nexport interface Dimension {\n  width: number;\n  height: number;\n  top: number;\n  left: number;\n  zIndex: number;\n}\n\nexport type RowGetter = (rowIdx: number) => RowData;\n\nexport interface Editor<V = never> {\n  getInputNode(): Element | Text | undefined | null;\n  getValue(): V;\n  hasResults?(): boolean;\n  isSelectOpen?(): boolean;\n  validate?(value: unknown): boolean;\n  readonly disableContainerStyles?: boolean;\n}\n\nexport interface FormatterProps<V, DV = unknown> {\n  rowIdx: number;\n  value: V;\n  column: CalculatedColumn;\n  row: RowData;\n  isScrolling: boolean;\n  dependentValues?: DV;\n}\n\nexport interface EditorProps<V = unknown, DV = unknown> {\n  column: CalculatedColumn<V, DV>;\n  value: V;\n  rowMetaData?: unknown;\n  rowData: RowData;\n  height: number;\n  onCommit(args?: { key?: string }): void;\n  onCommitCancel(): void;\n  onBlur(): void;\n  onOverrideKeyDown(e: KeyboardEvent): void;\n}\n\nexport interface HeaderRowProps<V, DV> {\n  column: CalculatedColumn<V, DV>;\n  rowType: HeaderRowType;\n}\n\nexport interface CellRendererProps<V = unknown, DV = unknown> {\n  idx: number;\n  rowIdx: number;\n  height: number;\n  value: V;\n  column: CalculatedColumn<V, DV>;\n  rowData: RowData;\n  cellMetaData: CellMetaData;\n  isScrolling: boolean;\n  scrollLeft: number;\n  isRowSelected?: boolean;\n  expandableOptions?: ExpandableOptions;\n  lastFrozenColumnIndex?: number;\n}\n\nexport interface RowRendererProps<V = unknown, DV = unknown> {\n  height: number;\n  columns: CalculatedColumn<V, DV>[];\n  row: RowData;\n  cellRenderer: React.ComponentType<CellRendererProps<V, DV>>;\n  cellMetaData: CellMetaData;\n  isSelected?: boolean;\n  idx: number;\n  extraClasses?: string;\n  subRowDetails?: SubRowDetails;\n  colOverscanStartIdx: number;\n  colOverscanEndIdx: number;\n  isScrolling: boolean;\n  scrollLeft: number;\n  lastFrozenColumnIndex?: number;\n}\n\nexport interface FilterRendererProps<V = unknown, DV = unknown> {\n  column: CalculatedColumn<V, DV>;\n  onChange?(event: AddFilterEvent): void;\n  /** TODO: remove */\n  getValidFilterValues?(): void;\n}\n\nexport interface SubRowDetails<C = unknown> {\n  canExpand: boolean;\n  field: string;\n  expanded: boolean;\n  children: C[];\n  treeDepth: number;\n  siblingIndex: number;\n  numberSiblings: number;\n  group?: boolean;\n}\n\nexport interface SubRowOptions<C = unknown> {\n  rowIdx: number;\n  idx: number;\n  rowData: RowData;\n  expandArgs?: ExpandableOptions<C>;\n}\n\nexport interface ExpandableOptions<C = unknown> {\n  canExpand: boolean;\n  field: string;\n  expanded: boolean;\n  children: C[];\n  treeDepth: number;\n  subRowDetails: SubRowDetails;\n}\n\ninterface Action {\n  text: ReactNode;\n  callback(): void;\n}\n\nexport interface CellActionButton {\n  icon: ReactNode;\n  actions?: Action[];\n  callback?(): void;\n}\n\nexport interface ColumnEventInfo extends Position {\n  rowId: unknown;\n  column: CalculatedColumn;\n}\n\nexport interface CellRenderer {\n  setScrollLeft(scrollLeft: number): void;\n}\n\nexport interface RowRenderer {\n  setScrollLeft(scrollLeft: number): void;\n  getRowTop?(): number;\n  getRowHeight?(): number;\n  getDecoratedComponentInstance?(idx: number): { row: RowRenderer & React.Component<RowRendererProps> } | undefined;\n}\n\nexport interface ScrollPosition {\n  scrollLeft: number;\n  scrollTop: number;\n}\n\nexport interface InteractionMasksMetaData {\n  onCheckCellIsEditable?(e: CheckCellIsEditableEvent): boolean;\n  onCellCopyPaste?(e: CellCopyPasteEvent): void;\n  onGridRowsUpdated(\n    cellKey: string,\n    toRow1: number,\n    toRow2: number,\n    data: { [key: string]: unknown },\n    updateAction: UpdateActions,\n    fromRow?: number\n  ): void;\n  onDragHandleDoubleClick(data: Position & { rowData: RowData }): void;\n  onCellSelected?(position: Position): void;\n  onCellDeSelected?(position: Position): void;\n  onCellRangeSelectionStarted?(selectedRange: SelectedRange): void;\n  onCellRangeSelectionUpdated?(selectedRange: SelectedRange): void;\n  onCellRangeSelectionCompleted?(selectedRange: SelectedRange): void;\n  onCommit(e: CommitEvent): void;\n}\n\nexport interface RowGroupMetaData {\n  isGroup: boolean;\n  treeDepth: number;\n  isExpanded: boolean;\n  columnGroupName: string;\n  columnGroupDisplayName: string;\n  getRowRenderer?(props: unknown, rowIdx: number): React.ReactElement;\n}\n\nexport type RowSelection = { indexes?: number[] } | { isSelectedKey?: string } | { keys?: { values: unknown[]; rowKey: string } };\n\nexport interface HeaderRowData {\n  rowType: HeaderRowType;\n  height: number;\n  filterable?: boolean;\n  onFilterChange?(args: AddFilterEvent): void;\n}\n\nexport interface FilterTerm {\n  value: number | boolean | string | [] | { [key: string]: number | boolean | string | [] | null } | null;\n  type: number;\n}\n\nexport interface AddFilterEvent {\n  column: Column;\n  filterTerm: FilterTerm[];\n  filterValues: (row: RowData, columnFilter: AddFilterEvent, columnKey: string) => boolean;\n  rawValue: string;\n}\n\nexport interface CommitEvent<V = never> {\n  cellKey: string;\n  rowIdx: number;\n  updated: V;\n  key?: string;\n}\n\nexport interface RowExpandToggleEvent {\n  rowIdx: number;\n  shouldExpand: boolean;\n  columnGroupName: string;\n  name: string;\n}\n\nexport interface GridRowsUpdatedEvent<V = never> {\n  cellKey: string;\n  fromRow: number;\n  toRow: number;\n  fromRowId: unknown;\n  toRowId: unknown;\n  rowIds: unknown[];\n  updated: V;\n  action: UpdateActions;\n  fromRowData: RowData;\n}\n\nexport interface CellCopyPasteEvent {\n  cellKey: string;\n  rowIdx: number;\n  fromRow: number;\n  toRow: number;\n  value: unknown;\n}\n\nexport interface CheckCellIsEditableEvent extends Position {\n  row: unknown;\n  column: Column;\n}\n\nexport interface RowSelectionParams {\n  rowIdx: number;\n  row: RowData;\n}\n"]}